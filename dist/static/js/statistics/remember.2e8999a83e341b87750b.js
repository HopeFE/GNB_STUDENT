webpackJsonp([27],{"1YVD":function(e,t,r){var o=r("UVet");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r("rjj0")("4c4ec2b3",o,!0)},"3Tit":function(e,t,r){"use strict";function o(e){r("1YVD")}Object.defineProperty(t,"__esModule",{value:!0});var i=r("Dd8w"),n=r.n(i),s=r("ABCa"),a=r("rHil"),c=r("dQSc"),l=r("1DHf"),m=r("/0UN"),d=r("hGvq"),p=r("jOlP"),h=r("YxJB"),f=r("3Lt7"),u=r("2sLL"),b=r("HD9R"),x=r("2FOq"),v=r("63CM"),g=r.n(v),_=r("NYxO"),y={name:"remember",components:{XHeader:s.a,Group:a.a,Card:c.a,Cell:l.a,Checker:m.a,CheckerItem:d.a,Spinner:p.a,Flexbox:h.a,FlexboxItem:f.a,XButton:u.a,Popup:b.a,Previewer:x.a},computed:n()({},Object(_.mapGetters)(["AssembleRemember"])),data:function(){return{loading:!1,loadingNoData:!1,showErrorPopup:!1,errorType:{chapterId:"",id:"",errorComment:"",index:""},list:[{w:0,h:0,src:""}],options:{preload:[1,1],bgOpacity:1,fullscreenEl:!1,history:!0}}},directives:{TransferDom:g.a},methods:n()({},Object(_.mapActions)(["getStatisticsRemember","setStatisticsRememberAssembleUpdate","setStatisticsScroll","getStatisticsComment"]),{_getData:function(){var e=this;this.loading=!0,this.getStatisticsRemember().then(function(t){0===t.data.data.offset.length&&(e.loadingNoData=!0),console.log(t.data.data.offset),console.log(t.data.data.offset.length),e.loading=!1})},show:function(e){var t=this;this.list[0].w=e.width,this.list[0].h=e.height,this.list[0].src=e.url,this.$nextTick(function(){t.$refs.previewer.show(0)})},_showErrorPopup:function(e,t){this.showErrorPopup=!0,this.errorType.index=t,this.errorType.errorComment=e.errorComment,this.errorType.id=e.id,this.errorType.chapterId=e.chapterId},onItemClick:function(e){var t=this;this.showErrorPopup=!1,this.getStatisticsComment({chapterId:this.errorType.chapterId,index:this.errorType.index,errorComment:e,id:this.errorType.id,type:"remember"}).then(function(){t.errorType.errorComment="",t.$vux.toast.show({text:"设置错误原因成功!",type:"text",time:1500,position:"bottom"})}).catch(function(){t.errorType.errorComment=""})}}),beforeRouteEnter:function(e,t,r){r(function(e){e.AssembleRemember.index.reset&&e._getData(),e.$parent.$refs.viewBoxBody.scrollTop=e.AssembleRemember.index.scroll})},beforeRouteLeave:function(e,t,r){this.setStatisticsScroll({type:"remember",height:this.$parent.$refs.viewBoxBody.scrollTop}),this.showErrorPopup?(this.showErrorPopup=!1,r(!1)):r()}},w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._l(e.AssembleRemember.index.list,function(t,o){return r("card",{key:o},[r("div",{staticClass:"weui-panel__hd",attrs:{slot:"header"},slot:"header"},[r("flexbox",[r("flexbox-item",{staticStyle:{color:"#4cc0be"},attrs:{span:8}},[e._v(e._s(t.workbookName))]),e._v(" "),r("flexbox-item",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v(e._s(e._f("ymd")(t.time)))])],1)],1),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[r("div",{on:{click:function(r){e.show(t.photo)}}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.photo.url+"-errorList",expression:"error.photo.url+'-errorList'"}]})])]),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"weui-cell"},[r("flexbox",{staticClass:"weui-cell__bd"},[r("flexbox-item",{attrs:{span:4}},[r("x-button",{attrs:{mini:"",type:"primary",plain:t.errorComment.length>0},nativeOn:{click:function(r){e._showErrorPopup(t,o)}}},[e._v(e._s(t.errorComment.length?t.errorComment:"错误原因"))])],1),e._v(" "),r("flexbox-item",{attrs:{span:4}},[t.comment?r("x-button",{attrs:{mini:"",type:"primary",plain:""},nativeOn:{click:function(r){e.$router.push({name:"comment",params:{wbeid:t.id}})}}},[e._v("查看点评")]):e._e()],1),e._v(" "),r("flexbox-item",{staticStyle:{"text-align":"right"},attrs:{span:4},nativeOn:{click:function(r){e.setStatisticsRememberAssembleUpdate({id:t.id,index:o})}}},[t.isAssembly?r("i",{staticClass:"icon iconfont icon-correct",staticStyle:{color:"#4cc0be","margin-right":"1rem"}}):r("i",{staticClass:"icon iconfont icon-icon073102",staticStyle:{color:"#4cc0be","margin-right":"1rem"}})])],1)],1)])])}),e._v(" "),r("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[e.loading?r("spinner",{attrs:{type:"lines"}}):e._e(),e._v(" "),r("div",[e.loadingNoData?r("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[e._v("已经加载全部错题~")]):e._e(),e._v(" "),e.loadingNoData||e.loading?e._e():r("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:e._getData}},[e._v("点我加载更多")])])],1),e._v(" "),r("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[r("previewer",{ref:"previewer",attrs:{list:e.list,options:e.options}})],1),e._v(" "),r("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[r("popup",{staticClass:"checker-popup",model:{value:e.showErrorPopup,callback:function(t){e.showErrorPopup=t},expression:"showErrorPopup"}},[r("group",{attrs:{title:"选择错误原因："}},[r("div",{staticStyle:{padding:"10px 10px 0 10px"}},[r("checker",{attrs:{type:"radio","default-item-class":"check-item","selected-item-class":"check-item-selected","disabled-item-class":"check-item-disabled"},model:{value:e.errorType.errorComment,callback:function(t){e.$set(e.errorType,"errorComment",t)},expression:"errorType.errorComment"}},[r("checker-item",{attrs:{value:"概念模糊"},on:{"on-item-click":e.onItemClick}},[e._v("概念模糊")]),e._v(" "),r("checker-item",{attrs:{value:"粗心大意"},on:{"on-item-click":e.onItemClick}},[e._v("粗心大意")]),e._v(" "),r("checker-item",{attrs:{value:"能力不够"},on:{"on-item-click":e.onItemClick}},[e._v("能力不够")])],1)],1)])],1)],1)],2)},k=[],C={render:w,staticRenderFns:k},S=C,T=r("VU/8"),P=o,D=T(y,S,!1,P,"data-v-ef8911d6",null);t.default=D.exports},UVet:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"\n.weui-btn + .weui-btn[data-v-ef8911d6]{\n  margin-top:0;\n}\n.assembleCount[data-v-ef8911d6]{\n  position: fixed;\n  background:#4cc0be;\n  color:#fff;\n  font-size: .9rem;\n  height: 3.5rem;\n  width: 3.5rem;\n  -webkit-box-shadow: 2px 2px 7px #4cc0be;\n          box-shadow: 2px 2px 7px #4cc0be;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding:.5rem .75rem;\n  border-radius: 50%;\n  bottom: 10%;\n  right: 5%;\n  text-align: center;\n}\n.checker-popup[data-v-ef8911d6]{\n  background: #fff;\n}\n.check-item[data-v-ef8911d6] {\n  background-color: #ddd;\n  color: #222;\n  font-size: 14px;\n  padding: 8px 0;\n  width:32%;\n  margin-right: 0px;\n  line-height: 18px;\n  text-align:center;\n  margin-bottom: 10px;\n  border-radius: 15px;\n}\n.check-item-selected[data-v-ef8911d6] {\n  background-color: #4cc0be;\n  color: #fff;\n}\n.check-item-disabled[data-v-ef8911d6] {\n  color: #999;\n}\n",""])}});