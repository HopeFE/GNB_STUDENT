webpackJsonp([51],{"6IjE":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("Dd8w"),a=s.n(o),r=s("1sNz"),i=s("ABCa"),n=s("rHil"),l=s("dQSc"),c=s("1DHf"),d=s("jOlP"),h=s("YxJB"),m=s("3Lt7"),b=s("UIMx"),f=s("dgEa"),u=s("2FOq"),p=s("63CM"),w=s.n(p),v=s("NYxO"),g=s("xJtg"),x={name:"rememberAssemble",components:{ViewBox:r.a,XHeader:i.a,Group:n.a,Card:l.a,Cell:c.a,Spinner:d.a,Flexbox:h.a,FlexboxItem:m.a,Tabbar:b.a,TabbarItem:f.a,Previewer:u.a,Share:g.a},computed:a()({},Object(v.mapGetters)(["AssembleRemember"])),data:function(){return{loading:!0,error:!1,showAction:!1,share:{content:"试卷分享",title:"我的记错题组卷",href:""},list:[{w:0,h:0,src:""}],options:{preload:[1,1],bgOpacity:1,fullscreenEl:!1,history:!0}}},directives:{TransferDom:w.a},methods:a()({},Object(v.mapActions)(["getStatisticsRememberAssemble","clearStatisticsDownload","getStatisticsAssemblUrl","clearStatisticsAssemble"]),{_getData:function(){var e=this;this.clearStatisticsDownload({type:"remember"}),this.loading=!0,this.getStatisticsRememberAssemble().then(function(){e.error=!1,e.loading=!1}).catch(function(t){e.error=!0,e.loading=!1})},show:function(e){var t=this;this.list[0].w=e.width,this.list[0].h=e.height,this.list[0].src=e.url,this.$nextTick(function(){t.$refs.previewer.show(0)})},_shareSuccess:function(){this._getData(),this.clearStatisticsAssemble({type:"remember"}),this.$router.go(-1)},_download:function(){var e=this;this.getStatisticsAssemblUrl({type:"remember"}).then(function(t){e.share.href=t.data.data.url,e.showAction=!0})}}),beforeRouteEnter:function(e,t,s){s(function(e){e._getData()})},beforeRouteLeave:function(e,t,s){this.showAction&&(this.showAction=!1),s()}},_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view-box",{attrs:{"body-padding-top":"46px","body-padding-bottom":"40px"}},[s("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header"},slot:"header"},[s("x-header",{attrs:{"left-options":{backText:"记错题"}}})],1),e._v(" "),e._l(e.AssembleRemember.download,function(t,o){return s("card",{key:o},[s("div",{staticClass:"weui-panel__hd",attrs:{slot:"header"},slot:"header"},[s("flexbox",[s("flexbox-item",{staticStyle:{color:"#999999"},attrs:{span:8}},[e._v(e._s(t.workbookName))]),e._v(" "),s("flexbox-item",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v(e._s(e._f("ymd")(t.time)))])],1)],1),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("div",{on:{click:function(s){e.show(t.photo)}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.photo.url+"-errorList",expression:"error.photo.url+'-errorList'"}]})])])])}),e._v(" "),s("div",{staticStyle:{"text-align":"center",padding:"10px 0"}},[e.loading?s("spinner",{attrs:{type:"lines"}}):0===e.AssembleRemember.download.length?s("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[e._v("您还未有组卷")]):e.error?s("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:function(t){e._getData()}}},[e._v("出错了点我重新加载")]):e._e()],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("previewer",{ref:"previewer",attrs:{list:e.list,options:e.options}})],1),e._v(" "),s("share",{attrs:{change:e.showAction,showAction:e.showAction,content:e.share.content,title:e.share.title,href:e.share.href},on:{"update:change":function(t){e.showAction=t},"on-share-success":function(t){e._shareSuccess()}}}),e._v(" "),s("tabbar",{directives:[{name:"show",rawName:"v-show",value:e.AssembleRemember.download&&e.AssembleRemember.download.length,expression:"AssembleRemember.download && AssembleRemember.download.length"}],staticStyle:{"background-color":"#4cc0be",color:"#fff"},attrs:{slot:"bottom"},slot:"bottom"},[s("flexbox-item",{staticStyle:{"font-size":".8rem","text-align":"center",padding:".25rem 0"},attrs:{span:12},nativeOn:{click:function(t){e._download()}}},[s("i",{staticClass:"icon iconfont icon-download"}),e._v("下载")])],1)],2)},A=[],y={render:_,staticRenderFns:A},S=y,R=s("VU/8"),k=R(x,S,!1,null,null,null);t.default=k.exports}});