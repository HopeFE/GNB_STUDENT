webpackJsonp([52],{"4cnx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),o=a.n(s),i=a("1sNz"),r=a("ABCa"),n=a("rHil"),c=a("dQSc"),l=a("1DHf"),d=a("jOlP"),h=a("YxJB"),m=a("3Lt7"),f=a("UIMx"),u=a("dgEa"),p=a("2FOq"),b=a("63CM"),w=a.n(b),v=a("NYxO"),g=a("xJtg"),x={name:"cameraAssemble",components:{ViewBox:i.a,XHeader:r.a,Group:n.a,Card:c.a,Cell:l.a,Spinner:d.a,Flexbox:h.a,FlexboxItem:m.a,Tabbar:f.a,TabbarItem:u.a,Previewer:p.a,Share:g.a},computed:o()({},Object(v.mapGetters)(["AssembleCamera"])),data:function(){return{loading:!0,error:!1,showAction:!1,share:{content:"试卷分享",title:"我的拍错题组卷",href:""},list:[{w:0,h:0,src:""}],options:{preload:[1,1],bgOpacity:1,fullscreenEl:!1,history:!0}}},directives:{TransferDom:w.a},methods:o()({},Object(v.mapActions)(["getStatisticsCameraAssemble","clearStatisticsDownload","getStatisticsAssemblUrl","clearStatisticsAssemble"]),{_getData:function(){var t=this;this.clearStatisticsDownload({type:"camera"}),this.loading=!0,this.getStatisticsCameraAssemble().then(function(){t.error=!1,t.loading=!1}).catch(function(e){t.error=!0,t.loading=!1})},show:function(t){var e=this;this.list[0].w=t.width,this.list[0].h=t.height,this.list[0].src=t.url,this.$nextTick(function(){e.$refs.previewer.show(0)})},_shareSuccess:function(){this._getData(),this.clearStatisticsAssemble({type:"camera"}),this.$router.go(-1)},_download:function(){var t=this;this.getStatisticsAssemblUrl({type:"camera"}).then(function(e){t.share.href=e.data.data.url,t.showAction=!0})}}),beforeRouteEnter:function(t,e,a){a(function(t){t._getData()})},beforeRouteLeave:function(t,e,a){this.showAction&&(this.showAction=!1),a()}},_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view-box",{attrs:{"body-padding-top":"46px","body-padding-bottom":"40px"}},[a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header"},slot:"header"},[a("x-header",{attrs:{"left-options":{backText:"拍错题"}}})],1),t._v(" "),t._l(t.AssembleCamera.download,function(e,s){return a("card",{key:s},[a("div",{staticClass:"weui-panel__hd",attrs:{slot:"header"},slot:"header"},[a("flexbox",[a("flexbox-item",{staticStyle:{color:"#4cc0be"},attrs:{span:4}},[t._v(t._s(t._f("ymd")(e.time)))])],1)],1),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{on:{click:function(a){t.show(e.photo)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.photo.url+"-errorList",expression:"error.photo.url+'-errorList'"}]})])])])}),t._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"10px 0"}},[t.loading?a("spinner",{attrs:{type:"lines"}}):0===t.AssembleCamera.download.length?a("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[t._v("您还未有组卷")]):t.error?a("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:function(e){t._getData()}}},[t._v("出错了点我重新加载")]):t._e()],1),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"previewer",attrs:{list:t.list,options:t.options}})],1),t._v(" "),a("share",{attrs:{change:t.showAction,showAction:t.showAction,content:t.share.content,title:t.share.title,href:t.share.href},on:{"update:change":function(e){t.showAction=e},"on-share-success":function(e){t._shareSuccess()}}}),t._v(" "),a("tabbar",{directives:[{name:"show",rawName:"v-show",value:t.AssembleCamera.download&&t.AssembleCamera.download.length,expression:"AssembleCamera.download && AssembleCamera.download.length"}],staticStyle:{"background-color":"#4cc0be",color:"#fff"},attrs:{slot:"bottom"},slot:"bottom"},[a("flexbox-item",{staticStyle:{"font-size":".8rem","text-align":"center",padding:".25rem 0"},attrs:{span:12},nativeOn:{click:function(e){t._download()}}},[a("i",{staticClass:"icon iconfont icon-download"}),t._v("下载\n    ")])],1)],2)},A=[],y={render:_,staticRenderFns:A},S=y,C=a("VU/8"),D=C(x,S,!1,null,null,null);e.default=D.exports}});