webpackJsonp([104],{PjNG:function(t,o,e){"use strict";function n(t){var o="";return t.indexOf("math")>=0?o="2":t.indexOf("physics")>=0?o="7":t.indexOf("chemistry")>=0&&(o="8"),o}Object.defineProperty(o,"__esModule",{value:!0});var a={};e.d(a,"getMyBook",function(){return _}),e.d(a,"getMyBookAdd",function(){return b}),e.d(a,"myBookAdd",function(){return x}),e.d(a,"myBookDel",function(){return v}),e.d(a,"getMyBookSearch",function(){return w}),e.d(a,"myBookAddClear",function(){return M}),e.d(a,"myBookSearchClear",function(){return A}),e.d(a,"myBookClear",function(){return j}),e.d(a,"setMyBookScroll",function(){return S}),e.d(a,"myBookWantDel",function(){return Y}),e.d(a,"myBookWantAdd",function(){return K}),e.d(a,"myBookWantCamera",function(){return C}),e.d(a,"myBookWantUpload",function(){return L});var i={};e.d(i,"myBookMath",function(){return R}),e.d(i,"myBookPhysics",function(){return g}),e.d(i,"myBookChemistry",function(){return E}),e.d(i,"myBookAddList",function(){return T}),e.d(i,"myBookSearchList",function(){return D}),e.d(i,"myBookWant",function(){return I});var r,c=e("Dd8w"),u=e.n(c),s=e("ABCa"),d=e("1sNz"),m=e("odqc"),k=e("Znkm"),y=e("NYxO"),f=e("bOdI"),B=e.n(f),h=e("//Fk"),l=e.n(h),O=e("7+uW"),p=e("YEn3"),_=function(t,o){var e=(t.state,t.rootState),n=t.commit;return new l.a(function(t,a){Object(p.a)({method:"get",url:"workbook",params:{token:e.common.user.token,subjectId:o.subjectId}}).then(function(e){n("MYBOOK",{subject:o.subject,data:e.data.data}),t(e)})})},b=function(t,o){var e=t.rootState,a=t.commit;t.state;return new l.a(function(t,o){Object(p.a)({method:"get",url:"workbook/list",params:{token:e.common.user.token,subjectId:n(e.route.params.subject),textbookId:e.route.query.id}}).then(function(o){a("MYBOOK_LIST",{data:o.data.data}),t(o)})})},x=function(t,o){var e=t.rootState,n=t.commit;t.state;return new l.a(function(t,a){Object(p.a)({method:"post",url:"workbook/update",data:{token:e.common.user.token,type:"add",workbookId:o.workbookId}}).then(function(e){n("MYBOOK_ADD",{type:o.type,pindex:o.pindex,index:o.index}),O.default.$vux.toast.show({text:"增加习题册成功",type:"success",isShowMask:!0,time:1500}),t(e)})})},v=function(t,o){var e=t.rootState,n=t.commit;t.state;return new l.a(function(t,a){Object(p.a)({method:"post",url:"workbook/update",data:{token:e.common.user.token,type:"del",myBookId:o.myBookId}}).then(function(e){n("MYBOOK_DEL",{type:o.type,pindex:o.pindex,index:o.index}),O.default.$vux.toast.show({text:"删除习题册成功",type:"success",isShowMask:!0,time:1500}),t(e)})})},w=function(t,o){var e=t.rootState,a=t.commit;t.state;return new l.a(function(t,i){Object(p.a)({method:"get",url:"workbook/list",params:{token:e.common.user.token,subjectId:n(e.route.params.subject),myBookName:o.myBookName}}).then(function(o){a("MYBOOK_SEARCH",{data:o.data.data}),t(o)})})},M=function(t){(0,t.commit)("MYBOOK_LIST_CLEAR")},A=function(t){(0,t.commit)("MYBOOK_SEARCH_CLEAR")},j=function(t,o){t.rootState;(0,t.commit)("MYBOOK_CLEAR",{subject:o.subject})},S=function(t,o){t.rootState;(0,t.commit)("MYBOOK_SCROLL",{subject:o.subject,height:o.height})},Y=function(t,o){(0,t.commit)("MYBOOK_WANT_DEL",o)},K=function(t,o){(0,t.commit)("MYBOOK_WANT_ADD",{type:o.type,data:o.data})},C=function(t,o){(0,t.commit)("MYBOOK_WANT_CAMERA",o)},L=function(t){var o=t.state,e=t.rootState,n=t.commit;return O.default.$vux.loading.show({text:"请稍候"}),new l.a(function(t,a){Object(p.a)({method:"post",url:"workbook/want",data:{index:o.myBook.want.index,version:o.myBook.want.version,token:e.common.user.token}}).then(function(o){O.default.$vux.loading.hide(),O.default.$vux.toast.show({text:"提交成功",type:"success",isShowMask:!0,time:1500}),n("MYBOOK_WANT_UPLOAD"),t(o)}).catch(function(t){O.default.$vux.loading.hide(),a(t)})})},R=function(t){return t.myBook.math},g=function(t){return t.myBook.physics},E=function(t){return t.myBook.chemistry},T=function(t){return t.myBook.add},D=function(t){return t.myBook.search},I=function(t){return t.myBook.want},N={myBook:{math:{scroll:0,list:[]},physics:{scroll:0,list:[]},chemistry:{scroll:0,list:[]},add:[],search:[],want:{version:"",index:"",camera:""}}},W=N,$=(r={},B()(r,"MYBOOK",function(t,o){t.myBook[o.subject].list=o.data}),B()(r,"MYBOOK_CLEAR",function(t,o){t.myBook[o.subject].list=[],t.myBook[o.subject].scroll=0}),B()(r,"MYBOOK_SCROLL",function(t,o){t.myBook[o.subject].scroll=o.height}),B()(r,"MYBOOK_LIST",function(t,o){t.myBook.add=o.data.textbook}),B()(r,"MYBOOK_LIST_CLEAR",function(t){t.myBook.add=[]}),B()(r,"MYBOOK_SEARCH",function(t,o){t.myBook.search=o.data.textbook}),B()(r,"MYBOOK_SEARCH_CLEAR",function(t){t.myBook.search=[]}),B()(r,"MYBOOK_ADD",function(t,o){t.myBook[o.type][o.pindex].list[o.index].status=!0}),B()(r,"MYBOOK_DEL",function(t,o){t.myBook[o.type][o.pindex].list[o.index].status=!1}),B()(r,"MYBOOK_WANT_ADD",function(t,o){"index"===o.type?t.myBook.want.index=o.data:t.myBook.want.version=o.data}),B()(r,"MYBOOK_WANT_DEL",function(t,o){"index"===o?t.myBook.want.index="":t.myBook.want.version=""}),B()(r,"MYBOOK_WANT_CAMERA",function(t,o){t.myBook.want.camera=o}),B()(r,"MYBOOK_WANT_UPLOAD",function(t){t.myBook.want.index="",t.myBook.want.version="",t.myBook.want.camera=""}),r),U={state:W,mutations:$,actions:a,getters:i},q=e("olkN"),H={name:"myBook",components:{XHeader:s.a,ViewBox:d.a,Tab:m.a,TabItem:k.a},computed:u()({},Object(y.mapGetters)(["Route","User"])),methods:{_add:function(){"myBook_math"===this.Route.name?this.$router.push({name:"myBook_add",params:{subject:"math"},query:{id:this.User.textbook.math[0].id}}):"myBook_physics"===this.Route.name?this.$router.push({name:"myBook_add",params:{subject:"physics"},query:{id:this.User.textbook.physics[0].id}}):this.$router.push({name:"myBook_add",params:{subject:"chemistry"},query:{id:this.User.textbook.chemistry[0].id}})}},beforeCreate:function(){q.a.registerModule("myBook",u()({},U))}},P=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("view-box",{attrs:{"body-padding-top":"46px"}},[e("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header"},slot:"header"},[e("x-header",{attrs:{"left-options":{backText:"我的习题册"}}},[e("div",{attrs:{slot:"right"},on:{click:t._add},slot:"right"},[e("i",{staticClass:"icon iconfont icon-book",staticStyle:{padding:"10px",margin:"0 -10px 0 0"}})])]),t._v(" "),e("tab",[t.User.subjectType.indexOf("math")>=0?e("tab-item",{attrs:{selected:"myBook_math"===t.Route.name},nativeOn:{click:function(o){t.$router.replace("math")}}},[t._v("数学")]):t._e(),t._v(" "),t.User.subjectType.indexOf("physics")>=0?e("tab-item",{attrs:{selected:"myBook_physics"===t.Route.name},nativeOn:{click:function(o){t.$router.replace("physics")}}},[t._v("物理")]):t._e(),t._v(" "),t.User.subjectType.indexOf("chemistry")>=0?e("tab-item",{attrs:{selected:"myBook_chemistry"===t.Route.name},nativeOn:{click:function(o){t.$router.replace("chemistry")}}},[t._v("化学")]):t._e()],1)],1),t._v(" "),e("div",{staticStyle:{"padding-top":"46px"}},[e("keep-alive",[e("router-view")],1)],1)])},z=[],F={render:P,staticRenderFns:z},G=F,V=e("VU/8"),J=V(H,G,!1,null,null,null);o.default=J.exports}});