webpackJsonp([102],{pJVx:function(t,o,e){"use strict";function n(t){var o="";return t.indexOf("math")>=0?o="2":t.indexOf("physics")>=0?o="7":t.indexOf("chemistry")>=0&&(o="8"),o}Object.defineProperty(o,"__esModule",{value:!0});var r={};e.d(r,"getWorkbook",function(){return p}),e.d(r,"getWorkbookAdd",function(){return K}),e.d(r,"workbookAdd",function(){return _}),e.d(r,"workbookDel",function(){return x}),e.d(r,"getWorkbookSearch",function(){return E}),e.d(r,"setWorkbookScroll",function(){return W}),e.d(r,"workbookAddClear",function(){return C}),e.d(r,"workbookSearchClear",function(){return A}),e.d(r,"workbookClear",function(){return B}),e.d(r,"getWorkbookChapter",function(){return S}),e.d(r,"WorkbookExercisePost",function(){return v}),e.d(r,"workbookChapterClear",function(){return L}),e.d(r,"setWorkbookChapterScroll",function(){return y}),e.d(r,"getWorkbookExercise",function(){return D}),e.d(r,"workbookExerciseClear",function(){return I}),e.d(r,"workbookExAnswerChange",function(){return g}),e.d(r,"workbookExCamera",function(){return j}),e.d(r,"workbookExCameraDel",function(){return T}),e.d(r,"workbookUploadDel",function(){return $}),e.d(r,"workbookUploadAdd",function(){return P}),e.d(r,"workbookExErrorUpload",function(){return U}),e.d(r,"setWorkbookExersciseScroll",function(){return X}),e.d(r,"workbookWantDel",function(){return N}),e.d(r,"workbookWantAdd",function(){return H}),e.d(r,"workbookWantCamera",function(){return M}),e.d(r,"workbookWantUpload",function(){return q}),e.d(r,"workbookCamera",function(){return G}),e.d(r,"workbookUpload",function(){return V});var a={};e.d(a,"workbookMath",function(){return z}),e.d(a,"workbookPhysics",function(){return F}),e.d(a,"workbookChemistry",function(){return J}),e.d(a,"workbookAddList",function(){return Y}),e.d(a,"workbookSearchList",function(){return Z}),e.d(a,"workbookWant",function(){return Q}),e.d(a,"workbookUploader",function(){return tt}),e.d(a,"workbookChapter",function(){return ot}),e.d(a,"workbookExercise",function(){return et});var i,c=e("Dd8w"),u=e.n(c),s=e("ABCa"),d=e("1sNz"),k=e("odqc"),O=e("Znkm"),m=e("NYxO"),f=e("bOdI"),l=e.n(f),b=e("//Fk"),w=e.n(b),R=e("7+uW"),h=e("YEn3"),p=function(t,o){var e=(t.state,t.rootState),n=t.commit;return new w.a(function(t,r){Object(h.a)({method:"get",url:"workbook",params:{token:e.common.user.token,subjectId:o.subjectId}}).then(function(e){n("WORKBOOK",{subject:o.subject,data:e.data.data}),t(e)})})},K=function(t,o){var e=t.rootState,r=t.commit;t.state;return new w.a(function(t,o){Object(h.a)({method:"get",url:"workbook/list",params:{token:e.common.user.token,subjectId:n(e.route.params.subject),textbookId:e.route.query.id}}).then(function(o){r("WORKBOOK_LIST",{data:o.data.data}),t(o)})})},_=function(t,o){var e=t.rootState,n=t.commit;t.state;return new w.a(function(t,r){Object(h.a)({method:"post",url:"workbook/update",data:{token:e.common.user.token,type:"add",workbookId:o.workbookId}}).then(function(e){n("WORKBOOK_ADD",{type:o.type,pindex:o.pindex,index:o.index}),R.default.$vux.toast.show({text:"增加习题册成功",type:"success",isShowMask:!0,time:1500}),t(e)})})},x=function(t,o){var e=t.rootState,n=t.commit;t.state;return new w.a(function(t,r){Object(h.a)({method:"post",url:"workbook/update",data:{token:e.common.user.token,type:"del",workbookId:o.workbookId}}).then(function(e){n("WORKBOOK_DEL",{type:o.type,pindex:o.pindex,index:o.index}),R.default.$vux.toast.show({text:"删除习题册成功",type:"success",isShowMask:!0,time:1500}),t(e)})})},E=function(t,o){var e=t.rootState,r=t.commit;t.state;return new w.a(function(t,a){Object(h.a)({method:"get",url:"workbook/list",params:{token:e.common.user.token,subjectId:n(e.route.params.subject),workbookName:o.workbookName}}).then(function(o){r("WORKBOOK_SEARCH",{data:o.data.data}),t(o)})})},W=function(t,o){var e=t.rootState;(0,t.commit)("WORKBOOK_SCROLL",{subject:-1!==e.route.name.indexOf("math")?"math":"physics",height:o})},C=function(t){(0,t.commit)("WORKBOOK_LIST_CLEAR")},A=function(t){(0,t.commit)("WORKBOOK_SEARCH_CLEAR")},B=function(t,o){t.rootState;(0,t.commit)("WORKBOOK_CLEAR",{subject:o.subject})},S=function(t){var o=(t.state,t.rootState),e=t.commit;return new w.a(function(t,n){Object(h.a)({method:"get",url:"workbook/chapter",params:{token:o.common.user.token,workbookId:o.route.params.id}}).then(function(o){e("WORKBOOK_CHAPTER",o.data.data),t(o)})})},v=function(t,o){var e=(t.state,t.rootState),n=t.commit;return R.default.$vux.loading.show({text:"请稍候"}),new w.a(function(t,r){Object(h.a)({method:"post",url:"workbook/submit/v2",data:{answer:o.answer,answerId:o.answerId,token:e.common.user.token,chapterId:e.route.params.id}}).then(function(o){R.default.$vux.loading.hide(),R.default.$vux.toast.show({text:"提交成功",type:"success",isShowMask:!0,time:1500}),n("WORKBOOK_EXERCISE_POST",o.data.data),n("WORKBOOK_CHAPTER_CLEAR"),t(o)}).catch(function(t){R.default.$vux.loading.hide(),r(t)})})},L=function(t){(0,t.commit)("WORKBOOK_CHAPTER_CLEAR")},y=function(t,o){(0,t.commit)("WORKBOOK_CHAPTER_SCROLL",o)},D=function(t,o){var e=(t.state,t.rootState),n=t.commit;return R.default.$vux.loading.show({text:"请稍候"}),new w.a(function(t,r){Object(h.a)({method:"get",url:"workbook/exercises/v2",params:{token:e.common.user.token,chapterId:e.route.params.id||o}}).then(function(o){R.default.$vux.loading.hide(),n("WORKBOOK_EXERCISE",o.data.data),t(o)}).catch(function(){R.default.$vux.loading.hide()})})},I=function(t){(0,t.commit)("WORKBOOK_EXERCISE_CLEAR")},g=function(t,o){(0,t.commit)("WORKBOOK_EXERCISE_CHANGE",o)},j=function(t,o){(0,t.commit)("WORKBOOK_EXERCISE_ERROR_ADD",o)},T=function(t,o){(0,t.commit)("WORKBOOK_EXERCISE_ERROR_DEL",o)},$=function(t,o){(0,t.commit)("WORKBOOK_UPLOAD_DEL",o)},P=function(t,o){(0,t.commit)("WORKBOOK_UPLOAD_ADD",o)},U=function(t,o){var e=(t.state,t.rootState);t.commit;return R.default.$vux.loading.show({text:"请稍候"}),new w.a(function(t,n){Object(h.a)({method:"post",url:"workbook/exercise/uploader",data:{wbeid:o.wbeid,errorComment:o.errorComment,chapterId:e.route.params.id,token:e.common.user.token}}).then(function(o){R.default.$vux.loading.hide(),R.default.$vux.toast.show({text:"设置错误原因成功!",type:"text",time:1500,position:"bottom"}),t(o)}).catch(function(t){R.default.$vux.loading.hide(),n(t)})})},X=function(t,o){(0,t.commit)("WORKBOOK_EXERCISE_SCROLL",o)},N=function(t,o){(0,t.commit)("WORKBOOK_WANT_DEL",o)},H=function(t,o){(0,t.commit)("WORKBOOK_WANT_ADD",{type:o.type,data:o.data})},M=function(t,o){(0,t.commit)("WORKBOOK_WANT_CAMERA",o)},q=function(t){var o=t.state,e=t.rootState,n=t.commit;return R.default.$vux.loading.show({text:"请稍候"}),new w.a(function(t,r){Object(h.a)({method:"post",url:"workbook/want",data:{index:o.workbook.want.index,version:o.workbook.want.version,token:e.common.user.token}}).then(function(o){R.default.$vux.loading.hide(),R.default.$vux.toast.show({text:"提交成功",type:"success",isShowMask:!0,time:1500}),n("WORKBOOK_WANT_UPLOAD"),t(o)}).catch(function(t){R.default.$vux.loading.hide(),r(t)})})},G=function(t,o){(0,t.commit)("WORKBOOK_UPLOAD_CAMERA",o)},V=function(t){var o=t.state,e=t.rootState,n=t.commit;return R.default.$vux.loading.show({text:"请稍候"}),new w.a(function(t,r){Object(h.a)({method:"post",url:"workbook/uploader",data:{token:e.common.user.token,cameraList:o.uploader.list,chapterId:e.route.params.id}}).then(function(o){n("WORKBOOK_UPLOAD",o.data.data),t(o),R.default.$vux.loading.hide()}).catch(function(){R.default.$vux.loading.hide()})})},z=function(t){return t.workbook.math},F=function(t){return t.workbook.physics},J=function(t){return t.workbook.chemistry},Y=function(t){return t.workbook.add},Z=function(t){return t.workbook.search},Q=function(t){return t.workbook.want},tt=function(t){return t.uploader},ot=function(t){return t.chapter},et=function(t){return t.exercise},nt={workbook:{math:{scroll:0,list:[]},physics:{scroll:0,list:[]},chemistry:{scroll:0,list:[]},add:[],search:[],want:{version:"",index:"",camera:""}},chapter:{list:[],scroll:0,isReset:!1},uploader:{list:[],camera:""},exercise:{list:[],cameraList:[],camera:"",scroll:0,isReset:!1}},rt=nt,at=(i={},l()(i,"WORKBOOK",function(t,o){t.workbook[o.subject].list=o.data}),l()(i,"WORKBOOK_CLEAR",function(t,o){t.workbook[o.subject].list=[],t.workbook[o.subject].scroll=0}),l()(i,"WORKBOOK_SCROLL",function(t,o){t.workbook[o.subject].scroll=o.height}),l()(i,"WORKBOOK_LIST",function(t,o){t.workbook.add=o.data.textbook}),l()(i,"WORKBOOK_LIST_CLEAR",function(t){t.workbook.add=[]}),l()(i,"WORKBOOK_SEARCH",function(t,o){t.workbook.search=o.data.textbook}),l()(i,"WORKBOOK_SEARCH_CLEAR",function(t){t.workbook.search=[]}),l()(i,"WORKBOOK_ADD",function(t,o){t.workbook[o.type][o.pindex].list[o.index].status=!0}),l()(i,"WORKBOOK_DEL",function(t,o){t.workbook[o.type][o.pindex].list[o.index].status=!1}),l()(i,"WORKBOOK_CHAPTER",function(t,o){t.chapter.list=o,t.chapter.isReset=!1}),l()(i,"WORKBOOK_CHAPTER_CLEAR",function(t){t.chapter.list=[],t.chapter.isReset=!0}),l()(i,"WORKBOOK_CHAPTER_SCROLL",function(t,o){t.chapter.scroll=o}),l()(i,"WORKBOOK_EXERCISE",function(t,o){t.exercise.list=o,t.exercise.isReset=!1,t.exercise.scroll=0}),l()(i,"WORKBOOK_EXERCISE_CLEAR",function(t){t.exercise.list=[],t.exercise.cameraList=[],t.exercise.isReset=!0,t.uploader.list=[],t.uploader.camera=""}),l()(i,"WORKBOOK_EXERCISE_SCROLL",function(t,o){t.exercise.scroll=o}),l()(i,"WORKBOOK_EXERCISE_POST",function(t,o){t.chapter.isReset=!0,t.exercise.list=o}),l()(i,"WORKBOOK_EXERCISE_CHANGE",function(t,o){"1"===o.type?t.exercise.list.a[0].b[o.pid].c[o.id].answer=!t.exercise.list.a[0].b[o.pid].c[o.id].answer:t.exercise.list.a[o.pid].b[o.id].answer=!t.exercise.list.a[o.pid].b[o.id].answer}),l()(i,"WORKBOOK_EXERCISE_ERROR_ADD",function(t,o){t.exercise.cameraList=[],t.exercise.cameraList.push(o)}),l()(i,"WORKBOOK_EXERCISE_ERROR_DEL",function(t,o){t.exercise.cameraList.splice(o,1)}),l()(i,"WORKBOOK_EXERCISE_ERROR_UPLOAD",function(t){t.exercise.isReset=!0,t.exercise.camera="",t.exercise.cameraList=[]}),l()(i,"WORKBOOK_UPLOAD_DEL",function(t,o){t.uploader.list.splice(o,1)}),l()(i,"WORKBOOK_UPLOAD_ADD",function(t,o){t.uploader.list.push(o),t.uploader.camera=""}),l()(i,"WORKBOOK_UPLOAD_CAMERA",function(t,o){t.uploader.camera=o}),l()(i,"WORKBOOK_UPLOAD",function(t,o){t.uploader.list=[],t.exercise.list=o}),l()(i,"WORKBOOK_WANT_ADD",function(t,o){"index"===o.type?t.workbook.want.index=o.data:t.workbook.want.version=o.data}),l()(i,"WORKBOOK_WANT_DEL",function(t,o){"index"===o?t.workbook.want.index="":t.workbook.want.version=""}),l()(i,"WORKBOOK_WANT_CAMERA",function(t,o){t.workbook.want.camera=o}),l()(i,"WORKBOOK_WANT_UPLOAD",function(t){t.workbook.want.index="",t.workbook.want.version="",t.workbook.want.camera=""}),i),it={state:rt,mutations:at,actions:r,getters:a},ct=e("olkN"),ut={name:"workbook",components:{XHeader:s.a,ViewBox:d.a,Tab:k.a,TabItem:O.a},computed:u()({},Object(m.mapGetters)(["Route","User"])),methods:{_add:function(){"workbook_math"===this.Route.name?this.$router.push({name:"workbook_add",params:{subject:"math"},query:{id:this.User.textbook.math[0].id}}):"workbook_physics"===this.Route.name?this.$router.push({name:"workbook_add",params:{subject:"physics"},query:{id:this.User.textbook.physics[0].id}}):this.$router.push({name:"workbook_add",params:{subject:"chemistry"},query:{id:this.User.textbook.chemistry[0].id}})}},beforeCreate:function(){ct.a.registerModule("workbook",u()({},it))}},st=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("view-box",{attrs:{"body-padding-top":"46px"}},[e("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header"},slot:"header"},[e("x-header",{attrs:{"left-options":{backText:"记错题"}}},[e("div",{attrs:{slot:"right"},on:{click:t._add},slot:"right"},[e("i",{staticClass:"icon iconfont icon-book",staticStyle:{padding:"10px",margin:"0 -10px 0 0"}})])]),t._v(" "),e("tab",[t.User.subjectType.indexOf("math")>=0?e("tab-item",{attrs:{selected:"workbook_math"===t.Route.name},nativeOn:{click:function(o){t.$router.replace("math")}}},[t._v("数学")]):t._e()],1)],1),t._v(" "),e("div",{staticStyle:{"padding-top":"46px"}},[e("keep-alive",[e("router-view")],1)],1)])},dt=[],kt={render:st,staticRenderFns:dt},Ot=kt,mt=e("VU/8"),ft=mt(ut,Ot,!1,null,null,null);o.default=ft.exports}});