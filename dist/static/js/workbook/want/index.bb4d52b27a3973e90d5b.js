webpackJsonp([16],{G1I4:function(t,e,o){"use strict";function a(t){o("NMzq")}Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),n=o.n(i),s=o("YxJB"),r=o("3Lt7"),l=o("1HIy"),c=o("ABCa"),p=o("1sNz"),d=o("2FOq"),m=o("63CM"),u=o.n(m),v=o("NYxO"),f={name:"want",components:{XHeader:c.a,ViewBox:p.a,Flexbox:s.a,FlexboxItem:r.a,GroupTitle:l.a,Previewer:d.a},computed:n()({},Object(v.mapGetters)(["workbookWant"])),directives:{TransferDom:u.a},data:function(){return{small:["http://img.guinaben.com/want2.png?imageView2/2/w/270/h/480/format/jpg/q/75|imageslim","http://img.guinaben.com/want1.jpg?imageView2/2/w/270/h/480/format/jpg/q/75|imageslim"],list:[{src:"http://img.guinaben.com/want2.png?imageView2/2/w/960/h/1280/format/jpg/q/75",w:960,h:1280},{src:"http://img.guinaben.com/want1.jpg?imageView2/2/w/960/h/1280/format/jpg/q/75",w:960,h:1280}],options:{preload:[1,1],bgOpacity:1,fullscreenEl:!1,history:!0}}},methods:n()({},Object(v.mapActions)(["workbookWantDel","workbookWantCamera","workbookWantUpload"]),{_add:function(t){var e=this;plus.camera.getCamera().captureImage(function(o){plus.io.resolveLocalFileSystemURL(o,function(o){e.workbookWantCamera(o.toLocalURL()),e.$router.push({name:"workbook_want_photo",query:{type:t}})})})},_del:function(t){this.workbookWantDel(t)},_show:function(t){var e=this;this.$nextTick(function(){e.$refs.previewer.show(t)})},_upload:function(){this.workbookWant.index?this.workbookWant.version?this.workbookWantUpload().then(function(){history.go(-1)}):this.$vux.toast.show({text:"请上传习题册版次",type:"text",time:1500,position:"bottom"}):this.$vux.toast.show({text:"请上传习题册封面",type:"text",time:1500,position:"bottom"})}}),beforeRouteEnter:function(t,e,o){o(function(t){"workbook_add"===e.name&&(t.workbookWantDel("index"),t.workbookWantDel("version"))})}},g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view-box",{attrs:{"body-padding-top":"46px"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header","left-options":{backText:"上传习题册"}},slot:"header"},[o("i",{staticClass:"icon iconfont icon-upload",staticStyle:{"font-size":"22px"},attrs:{slot:"right"},on:{click:t._upload},slot:"right"})]),t._v(" "),o("div",[o("div",{staticStyle:{background:"#fff",padding:"1rem 0"}},[o("group-title",{staticStyle:{"margin-top":"0"}},[t._v("请按照示例上传习题册封面和版印次")]),t._v(" "),o("flexbox",{staticStyle:{padding:".5rem 0"},attrs:{wrap:"wrap",align:"baseline"}},[o("flexbox-item",{attrs:{span:1}}),t._v(" "),o("flexbox-item",{attrs:{span:4},nativeOn:{click:function(e){t._show(0)}}},[o("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.small[0],expression:"small[0]",arg:"background-image"}],staticStyle:{height:"160px","background-size":"100% 100%"}})]),t._v(" "),o("flexbox-item",{attrs:{span:1}}),t._v(" "),o("flexbox-item",{attrs:{span:4},nativeOn:{click:function(e){t._show(1)}}},[o("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.small[1],expression:"small[1]",arg:"background-image"}],staticStyle:{height:"160px","background-size":"100% 100%"}})])],1),t._v(" "),o("flexbox",{attrs:{wrap:"wrap",align:"baseline"}},[o("flexbox-item",{attrs:{span:1}}),t._v(" "),o("flexbox-item",{attrs:{span:4}},[t.workbookWant.index?o("div",{staticClass:"photo"},[o("div",{staticStyle:{"text-align":"center",height:"160px","background-size":"100% 100%"},style:"background-image:url("+t.workbookWant.index+")"}),t._v(" "),o("i",{staticClass:"icon iconfont icon-error",staticStyle:{"font-size":"30px",position:"absolute",left:"5.4rem",top:"-1.2rem"},on:{click:function(e){t._del("index")}}})]):o("div",{staticClass:"photo",on:{click:function(e){t._add("index")}}},[o("div",{staticClass:"plus"},[o("b",[t._v("+")])])])]),t._v(" "),o("flexbox-item",{attrs:{span:1}}),t._v(" "),o("flexbox-item",{attrs:{span:4}},[t.workbookWant.version?o("div",{staticClass:"photo"},[o("div",{staticStyle:{"text-align":"center",height:"160px","background-size":"100% 100%"},style:"background-image:url("+t.workbookWant.version+")"}),t._v(" "),o("i",{staticClass:"icon iconfont icon-error",staticStyle:{"font-size":"30px",position:"absolute",left:"5.4rem",top:"-1.2rem"},on:{click:function(e){t._del("version")}}})]):o("div",{staticClass:"photo",on:{click:function(e){t._add("version")}}},[o("div",{staticClass:"plus"},[o("b",[t._v("+")])])])])],1)],1),t._v(" "),o("p",{staticClass:"notice"},[t._v("我们会尽快上架该习题册，请注意查看消息通知，感谢您的支持~")])]),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("previewer",{ref:"previewer",attrs:{list:t.list,options:t.options}})],1)],1)},b=[],x={render:g,staticRenderFns:b},h=x,w=o("VU/8"),k=a,_=w(f,h,!1,k,"data-v-6a592548",null);e.default=_.exports},NMzq:function(t,e,o){var a=o("yvLn");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("43ccfa4f",a,!0)},yvLn:function(t,e,o){e=t.exports=o("FZ+f")(!1),e.push([t.i,"\n.photo[data-v-6a592548] {\n  position: relative;\n  margin-top: 10px;\n}\n.photo .plus[data-v-6a592548] {\n  position: relative;\n  text-align: center;\n  height: 160px;\n  width: 6.2rem;\n  border: 1px solid #ccc;\n  color: #ccc;\n  border-radius: 3px;\n  float: left;\n}\n.photo .plus b[data-v-6a592548] {\n  position: absolute;\n  top: 40%;\n  font-size: 2rem;\n  left: 55%;\n  margin-left: -1rem;\n  margin-top: -1rem;\n}\n.notice[data-v-6a592548] {\n  text-align: center;\n  color: #333;\n  font-size: .7rem;\n  padding: 1rem;\n}\n",""])}});