webpackJsonp([33],{Oi7B:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.vux-header-title .vux-cell-box:before{\r\n  border-top:none !important;\n}\r\n",""])},SkfJ:function(t,e,a){var n=a("Oi7B");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("4f7da84c",n,!0)},lWoT:function(t,e,a){"use strict";function n(t){a("SkfJ")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),i=a.n(o),c=a("ABCa"),r=a("1sNz"),s=a("1DHf"),l=a("rHil"),h=a("jOlP"),d=a("HqzV"),u=a("7Ah8"),p=a("NYxO"),g=a("UgXb"),f=a("xJtg"),b={name:"PaperSearch",components:{XHeader:c.a,ViewBox:r.a,Cell:s.a,Group:l.a,Spinner:h.a,Search:d.a,PopupPicker:u.a,Share:f.a,gnbChangeSub:g.a},computed:i()({},Object(p.mapGetters)(["User","DownloadPaperSearch"])),data:function(){return{name:"",loading:!1,loadingNoData:!0,subject:"",showAction:!1,share:{content:"",title:"我的试卷",href:""}}},watch:{subject:function(t){t.toString().length&&(this.clearDownloadPaperSearch(),this._getData())}},methods:i()({},Object(p.mapActions)(["getDownloadSearch","getDownloadPaper","clearDownloadPaperSearch"]),{_download:function(t){var e=this;this.getDownloadPaper({downloadId:t.downloadId}).then(function(a){e.share.href=a.data.data.url,e.share.content=t.name,e.showAction=!0})},_getData:function(){var t=this;this.loading=!0,this.getDownloadSearch({name:this.name,subject:this.subject}).then(function(e){e.data.data.list.length<10?t.loadingNoData=!0:t.loadingNoData=!1,t.loading=!1}).catch(function(){t.loadingNoData=!0,t.loading=!1})},getResult:function(t){this.clearDownloadPaperSearch(),this._getData()},onSubmit:function(){this.$refs.search.setBlur()}}),beforeRouteEnter:function(t,e,a){a(function(t){t.name="",t.getResult()})},beforeRouteLeave:function(t,e,a){this.loadingNoData=!0,this.loading=!1,this.showAction?(this.showAction=!1,a(!1)):a()}},w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view-box",{ref:"sync",attrs:{"body-padding-top":"96px"}},[a("div",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"1"},attrs:{slot:"header"},slot:"header"},[a("x-header",{attrs:{"left-options":{backText:"试卷搜索"}}},[a("div",{staticStyle:{margin:"0"},attrs:{slot:"right"},slot:"right"},[a("gnbChangeSub",{attrs:{change:t.subject},on:{"update:change":function(e){t.subject=e}}})],1)]),t._v(" "),a("search",{ref:"search",attrs:{placeholder:"请输入试卷名称",autoFixed:!1},on:{"on-change":t.getResult,"on-submit":t.onSubmit},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),a("div",[a("group",{attrs:{gutter:"0"}},[t._l(t.DownloadPaperSearch.list,function(e,n){return[a("cell",{key:n,attrs:{title:e.name}},[a("div",{staticStyle:{color:"#4cc0be"}},[a("span",{staticStyle:{padding:"0 5px","line-height":"24px"},on:{click:function(a){t._download(e)}}},[a("i",{staticClass:"icon iconfont icon-download",staticStyle:{"font-size":"16px"}}),t._v("下载\n             ")])])])]})],2),t._v(" "),a("div",{staticStyle:{"text-align":"center",padding:"20px 0"}},[t.loading?a("spinner",{attrs:{type:"lines"}}):a("div",[t.loadingNoData?a("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"}},[t._v("暂无搜索结果~")]):a("p",{staticStyle:{"font-size":"16px",color:"#4cc0be"},on:{click:t._getData}},[t._v("点我加载更多")])])],1)],1),t._v(" "),a("share",{attrs:{change:t.showAction,showAction:t.showAction,content:t.share.content,title:t.share.title,href:t.share.href},on:{"update:change":function(e){t.showAction=e}}})],1)},S=[],v={render:w,staticRenderFns:S},x=v,m=a("VU/8"),D=n,_=m(b,x,!1,D,null,null);e.default=_.exports}});